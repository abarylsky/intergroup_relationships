---
title: "Untitled"
author: "Emma Livingston"
date: "10/23/2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(psysds364data)
library(tidyverse)
data("Goldberg_gav")
```

```{r variables}
var_labels <- data.frame(column_name = colnames(Goldberg_gav),
                         variable_label = sjlabelled::get_label(Goldberg_gav))

Goldberg_gav_sm <- Goldberg_gav %>%
  select(ID,
         Partner,
         group,
         ChildAge,
         chgend,
         gendexp,
         gender,
         sexor,
         contains("chrace"),
         religion,
         howrelig,
         contains("otherch"),
         occup,
         contains("otherwork"),
         educ,
         faminc,
         contains("polit"),
         contains("gayaff"),
         cityst,
         contains("genderparent"),
         sexor,
         contains("myrace"),
         contains("h12"),
         contains("w12"),
         h12social,
         h12selfdir,
         h12conform,
         contains("soccomp"),
         SocComp,
         Prosocial,
         Emotional
         )

```

```{r subset_data}
#exclude individuals who do not have data for parental values or social competence
Goldberg_gav_completes <- Goldberg_gav_sm %>%
  filter(!is.na(SocComp) & !is.na(Prosocial) & !is.na(Emotional) & !is.na(h12social) & !is.na(h12selfdir) & !is.na(h12conform)) %>%
  group_by(ID) %>%
  count() %>%
  filter(n == 2)

Goldberg_gav_sm <- Goldberg_gav_sm %>%
  inner_join(Goldberg_gav_completes, by = "ID")

Goldberg_gav_groups <- Goldberg_gav_sm %>%
  filter(Partner == 2) %>%
  group_by(group) %>%
  count()
```

```{r}
View(Goldberg_gav_sm %>% select(ID, Partner, group, h12social, h12selfdir, h12conform, SocComp, Prosocial, Emotional))
```

```{r}
Goldberg_gav_sm %>%
  group_by(gender) %>%
  count()

Goldberg_gav_sm <- Goldberg_gav_sm %>%
  mutate(gender = ifelse(gender == 3, 1, gender))

Goldberg_gav_sm$gender[is.na(Goldberg_gav_sm$gender)] <- 1

Goldberg_gav_sm %>%
  group_by(gender) %>%
  count()
  
```

```{r write_csv}
write_csv(Goldberg_gav_sm, "C:/Users/livin/Documents/Smith Senior Year/Intergroup Relationships/Research Project/Goldberg_gav_sm.csv")
```


# Correlation Matrix

```{r}
lesbians <- Goldberg_gav_sm %>%
  filter(group == 1)

gays <- Goldberg_gav_sm %>%
  filter(group == 2)

straight_men <- Goldberg_gav_sm %>%
  filter(group == 3 & gender == 2)

straight_women <- Goldberg_gav_sm %>%
  filter(group == 3 & gender == 1)
```

```{r}

mean(lesbians$SocComp)
mean(gays$SocComp)
mean(straight_men$SocComp)
mean(straight_women$SocComp)

mean(lesbians$h12conform)
mean(gays$h12conform)
mean(straight_men$h12conform)
mean(straight_women$h12conform)

```

